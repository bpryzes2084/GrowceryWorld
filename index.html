<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Growceryworld â€” Giving You Choices</title>
  <meta name="description" content="Growceryworld â€” Giving you choices. No monthly membership fees. Free item with every order." />
  <meta name="robots" content="index,follow" />

  <style>
    :root {
      --bg: #ffffff;
      --card: #ffffff;
      --ink: #0f172a;
      --muted: #475569;
      --border: #e5e7eb;
      --accent2: #16a34a;
      --accent2Hover: #15803d;
      --btnDark: #111827;
      --btnDarkHover: #0b1220;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0;
      padding: 0;
      background: var(--bg);
      color: var(--ink);
      font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }

    a { color: inherit; text-decoration: none; }

    .wrap {
      max-width: 1100px;
      margin: 0 auto;
      padding: 48px 20px 80px;
    }

    .top-nav {
      background: #ffffff;
      border-bottom: 1px solid var(--border);
      padding: 12px 20px;
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .top-nav-inner {
      max-width: 1100px;
      margin: 0 auto;
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 16px;
    }

    .nav-logo {
      font-weight: 800;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 6px;
    }

    .nav-links {
      display: flex;
      gap: 16px;
      font-size: 14px;
      color: var(--muted);
    }

    .nav-links a:hover { color: var(--ink); }

    .snipcart-checkout {
      background: #ffffff;
      border: 1px solid var(--border);
      padding: 8px 16px;
      border-radius: 10px;
      color: var(--ink);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 8px;
      transition: background 0.2s, border-color 0.2s;
      font-size: 14px;
      font-family: inherit;
    }

    .snipcart-checkout:hover {
      background: #f8fafc;
      border-color: #cbd5e1;
    }

    .section { margin: 32px 0; }

    .search-section { max-width: 760px; margin: 0 auto; text-align: left; }
    .search-form { display: flex; gap: 8px; margin-bottom: 10px; }

    .search-form input[type="search"] {
      flex: 1;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #ffffff;
      color: var(--ink);
      font-size: 14px;
      outline: none;
    }

    .search-form input[type="search"]:focus {
      border-color: #94a3b8;
      box-shadow: 0 0 0 3px rgba(148,163,184,0.25);
    }

    .search-form input::placeholder { color: #94a3b8; }

    .search-form button {
      padding: 12px 16px;
      border-radius: 12px;
      border: 0;
      background: var(--btnDark);
      color: #fff;
      cursor: pointer;
      font-weight: 700;
      font-size: 14px;
      white-space: nowrap;
    }

    .search-form button:hover { background: var(--btnDarkHover); }
    .search-form button:disabled { opacity: 0.5; cursor: default; }

    .search-status {
      font-size: 13px;
      color: var(--muted);
      min-height: 20px;
      margin-bottom: 8px;
    }

    .results-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
      gap: 16px;
    }

    .product-card {
      border: 1px solid var(--border);
      border-radius: 14px;
      padding: 14px;
      background: #ffffff;
      color: var(--ink);
      transition: transform 0.18s, box-shadow 0.18s, border-color 0.18s;
      overflow: hidden;
      position: relative;
    }

    .product-card:hover {
      transform: translateY(-2px);
      border-color: #cbd5e1;
      box-shadow: 0 10px 24px rgba(2,6,23,0.08);
    }

    .product-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 12px 12px 0 0;
      margin: -14px -14px 12px -14px;
      background: #f1f5f9;
    }

    .product-name { margin: 0 0 6px; font-size: 15px; font-weight: 800; }
    .product-price { margin: 0; font-size: 14px; font-weight: 800; color: var(--accent2); }
    .product-desc { margin: 8px 0 0; font-size: 13px; color: var(--muted); min-height: 34px; }
    .product-actions { margin-top: 10px; }

    .snipcart-add-item {
      width: 100%;
      padding: 10px 16px;
      border-radius: 10px;
      border: 0;
      background: var(--accent2);
      color: #fff;
      cursor: pointer;
      font-size: 14px;
      font-weight: 800;
      transition: background 0.15s;
      font-family: inherit;
    }
    .snipcart-add-item:hover { background: var(--accent2Hover); }

    .free-row { display: flex; gap: 10px; flex-wrap: wrap; align-items: center; }

    .free-select {
      flex: 1;
      min-width: 220px;
      padding: 12px;
      border-radius: 12px;
      border: 1px solid var(--border);
      background: #ffffff;
      color: var(--ink);
      font-size: 14px;
      outline: none;
    }

    .free-select:focus {
      border-color: #94a3b8;
      box-shadow: 0 0 0 3px rgba(148,163,184,0.25);
    }

    .free-btn {
      padding: 12px 16px;
      border-radius: 12px;
      border: 0;
      background: var(--btnDark);
      color: #fff;
      cursor: pointer;
      font-weight: 800;
      font-size: 14px;
      white-space: nowrap;
    }
    .free-btn:hover { background: var(--btnDarkHover); }
    .free-btn:disabled { opacity: 0.55; cursor: default; }

    .free-note { margin-top: 10px; color: var(--muted); font-size: 13px; min-height: 18px; }

    .tiles { display: grid; grid-template-columns: repeat(auto-fit, minmax(220px, 1fr)); gap: 16px; }

    .tile {
      background: #ffffff;
      border: 1px solid var(--border);
      padding: 18px;
      border-radius: 16px;
      font-size: 14px;
      box-shadow: 0 10px 24px rgba(2,6,23,0.05);
    }
    .tile h3 { margin-top: 0; margin-bottom: 8px; font-size: 16px; font-weight: 900; }

    .membership-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 18px;
      margin-top: 16px;
    }

    .membership-card {
      background: #ffffff;
      border-radius: 16px;
      padding: 18px;
      border: 1px solid var(--border);
      box-shadow: 0 10px 24px rgba(2,6,23,0.05);
    }

    .membership-card.featured { border-color: #6366f1; }

    .membership-icon { font-size: 24px; margin-bottom: 6px; }
    .membership-card h4 { margin: 0 0 4px; font-size: 16px; font-weight: 900; }
    .membership-tagline { font-size: 13px; color: var(--muted); margin-bottom: 10px; }
    .membership-price { font-size: 18px; font-weight: 900; margin-bottom: 8px; }
    .membership-price span { font-size: 11px; color: var(--muted); font-weight: 500; margin-left: 4px; }

    .membership-list { list-style: none; padding: 0; margin: 0 0 10px; font-size: 13px; }
    .membership-list li { margin-bottom: 4px; }
    .membership-list li::before { content: "âœ“ "; color: var(--accent2); font-weight: 900; }

    .membership-btn {
      display: inline-block;
      width: 100%;
      text-align: center;
      padding: 10px 14px;
      border-radius: 10px;
      background: #6366f1;
      color: #fff;
      font-size: 13px;
      font-weight: 900;
      margin-top: 4px;
    }
    .membership-btn:hover { background: #4f46e5; }

    footer { text-align: center; margin-top: 40px; font-size: 13px; color: var(--muted); }
    .coming-soon { text-align: center; margin-top: 16px; font-size: 13px; color: var(--muted); }

    @media (max-width: 640px) {
      .wrap { padding-inline: 14px; }
      .top-nav-inner { flex-wrap: wrap; justify-content: space-between; }
      .nav-links { display: none; }
    }

    /* ===== Snipcart FREE item display (Option 1) ===== */
    .snipcart-item-line[data-item-categories~="freebie"] .snipcart-item-line__price {
      display: none !important;
    }
    .snipcart-item-line[data-item-categories~="freebie"] .snipcart-item-line__title::after {
      content: " â€” FREE";
      color: #16a34a;
      font-weight: 900;
      margin-left: 4px;
    }
  </style>
</head>

<body>
  <nav class="top-nav">
    <div class="top-nav-inner">
      <div class="nav-logo">
        <span>Growceryworld</span>
      </div>
      <div class="nav-links">
        <a href="#search">Search</a>
        <a href="#free-item">Free item</a>
        <a href="#membership">Memberships</a>
      </div>
      <button class="snipcart-checkout">
        ðŸ›’ Cart (<span class="snipcart-items-count">0</span>)
      </button>
    </div>
  </nav>

  <main class="wrap">
    <section id="search" class="section search-section">
      <h2 style="font-size:20px;margin:0 0 8px;">Search products</h2>
      <p class="search-status" id="search-status"></p>
      <form id="gw-search" class="search-form" autocomplete="off">
        <input id="q" type="search" placeholder="Search by product name (e.g., cereal, Lysol, Dawn)..." aria-label="Search products" />
        <button type="submit" id="go">Search</button>
      </form>
      <div id="results" class="results-grid"></div>
    </section>

    <section id="free-item" class="section search-section">
      <h2 style="font-size:20px;margin:0 0 8px;">Free item with every order</h2>
      <p style="color:var(--muted);font-size:13px;margin:0 0 12px;">
        Pick <strong>one</strong> free item per order. Add it before checkout.
      </p>
      <div class="free-row">
        <select id="freeItemSelect" class="free-select">
          <option value="">-- Choose your free item --</option>
        </select>
        <button id="addFreeItemBtn" type="button" class="free-btn">Add Free Item</button>
      </div>
      <p id="freeItemStatus" class="free-note"></p>
    </section>

    <section class="section">
      <div class="tiles">
        <article class="tile">
          <h3>Free item with every order</h3>
          <p>Pick one free item per checkout. Simple, consistent, and generous.</p>
        </article>
        <article class="tile">
          <h3>Orders shipped via UPS</h3>
          <p>Predictable costs and reliable delivery options as we roll out.</p>
        </article>
        <article class="tile">
          <h3>Price-lock membership</h3>
          <p>Annual membership pricing that stays put. No surprise increases.</p>
        </article>
      </div>
    </section>

    <section id="membership" class="section">
      <h2 style="font-size:20px;margin:0 0 4px;text-align:center;">Growceryworld Membership</h2>
      <p style="text-align:center;color:var(--muted);font-size:13px;margin:0 0 16px;">
        Honoring everyday shoppers with locked-in annual pricing.
      </p>
      <div class="membership-grid">
        <div class="membership-card featured">
          <div class="membership-icon">ðŸ›’</div>
          <h4>Standard</h4>
          <p class="membership-tagline">For everyone who loves savings</p>
          <p class="membership-price">$20.00 <span>/year</span></p>
          <ul class="membership-list">
            <li>Free item with every order</li>
            <li>Free bottle of water</li>
          </ul>
          <a href="https://square.link/u/CP70vULk" class="membership-btn">Join Standard Membership</a>
        </div>
      </div>
    </section>

    <p class="coming-soon">Powered by Cloudflare Pages</p>

    <footer>
      <p>&copy; <span id="year"></span> Growceryworld. All rights reserved.</p>
    </footer>
  </main>

  <!-- Snipcart lazy-load settings -->
  <script>
    window.SnipcartSettings = {
      publicApiKey: "OGFjNmI1OGEtMjk5Mi00NjE4LTg4MjYtNzhhYjg1ZTMyYjM2NjM5MDEyNDc2NjY1NjgxMTIw",
      loadStrategy: "on-user-interaction"
    };
  </script>

  <!-- Snipcart lazy loader -->
  <script>
    (function(){var c,d;(d=(c=window.SnipcartSettings).version)!=null||(c.version="3.0");var s,S;(S=(s=window.SnipcartSettings).timeoutDuration)!=null||(s.timeoutDuration=2750);var l,p;(p=(l=window.SnipcartSettings).domain)!=null||(l.domain="cdn.snipcart.com");var w,u;(u=(w=window.SnipcartSettings).protocol)!=null||(w.protocol="https");var m,g;(g=(m=window.SnipcartSettings).loadCSS)!=null||(m.loadCSS=!0);var y=window.SnipcartSettings.version.includes("v3.0.0-ci")||window.SnipcartSettings.version!="3.0"&&window.SnipcartSettings.version.localeCompare("3.4.0",void 0,{numeric:!0,sensitivity:"base"})===-1,f=["focus","mouseover","touchmove","scroll","keydown"];window.LoadSnipcart=o;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",r):r();function r(){window.SnipcartSettings.loadStrategy?window.SnipcartSettings.loadStrategy==="on-user-interaction"&&(f.forEach(function(t){return document.addEventListener(t,o)}),setTimeout(o,window.SnipcartSettings.timeoutDuration)):o()}var a=!1;function o(){if(a)return;a=!0;let t=document.getElementsByTagName("head")[0],n=document.querySelector("#snipcart"),i=document.querySelector('src[src^="'.concat(window.SnipcartSettings.protocol,"://").concat(window.SnipcartSettings.domain,'"][src$="snipcart.js"]')),e=document.querySelector('link[href^="'.concat(window.SnipcartSettings.protocol,"://").concat(window.SnipcartSettings.domain,'"][href$="snipcart.css"]'));n||(n=document.createElement("div"),n.id="snipcart",n.setAttribute("hidden","true"),document.body.appendChild(n)),h(n),i||(i=document.createElement("script"),i.src="".concat(window.SnipcartSettings.protocol,"://").concat(window.SnipcartSettings.domain,"/themes/v").concat(window.SnipcartSettings.version,"/default/snipcart.js"),i.async=!0,t.appendChild(i)),!e&&window.SnipcartSettings.loadCSS&&(e=document.createElement("link"),e.rel="stylesheet",e.type="text/css",e.href="".concat(window.SnipcartSettings.protocol,"://").concat(window.SnipcartSettings.domain,"/themes/v").concat(window.SnipcartSettings.version,"/default/snipcart.css"),t.prepend(e)),f.forEach(function(v){return document.removeEventListener(v,o)})}function h(t){!y||(t.dataset.apiKey=window.SnipcartSettings.publicApiKey,window.SnipcartSettings.addProductBehavior&&(t.dataset.configAddProductBehavior=window.SnipcartSettings.addProductBehavior),window.SnipcartSettings.modalStyle&&(t.dataset.configModalStyle=window.SnipcartSettings.modalStyle),window.SnipcartSettings.currency&&(t.dataset.currency=window.SnipcartSettings.currency),window.SnipcartSettings.templatesUrl&&(t.dataset.templatesUrl=window.SnipcartSettings.templatesUrl))}})();
  </script>

  <!-- App logic: Search + Free Item dropdown -->
  <script>
    const WORKER_URL = 'https://gw-search.benterpryzes2084.workers.dev';

    const FREE_TAG = "GW_FREE_ITEM";
    const FREEBIE_CATEGORY = "freebie";
    const SITE_URL_FOR_ITEMS = "/";
    const FREE_ITEMS_URL = "/#free-item";

    const FREEBIE_DEFAULT_PRICE = 1.00;

    document.getElementById('year').textContent = new Date().getFullYear();

    const searchInput = document.getElementById('q');
    const searchBtn = document.getElementById('go');
    const resultsDiv = document.getElementById('results');
    const searchStatusEl = document.getElementById('search-status');

    function formatMoney(amount) { return '$' + amount.toFixed(2); }

    async function performSearch(evt) {
      if (evt) evt.preventDefault();

      const query = searchInput.value.trim();
      resultsDiv.innerHTML = '';
      searchStatusEl.textContent = '';

      if (!query) {
        searchStatusEl.textContent = 'Type something to search your Square inventory.';
        return;
      }

      searchBtn.disabled = true;
      searchBtn.textContent = 'Searchingâ€¦';
      searchStatusEl.textContent = 'Searchingâ€¦';

      try {
        const res = await fetch(WORKER_URL + '/search?q=' + encodeURIComponent(query));
        if (!res.ok) {
          const text = await res.text();
          console.error('Search failed:', res.status, text);
          searchStatusEl.textContent = 'Search error. Check Worker endpoint or CORS.';
          return;
        }

        const data = await res.json();

        if (!Array.isArray(data.objects)) {
          console.error('Unexpected response shape:', data);
          searchStatusEl.textContent = 'Search error. Worker must return { objects: [...] }.';
          return;
        }

        const objects = data.objects.filter(o => o.type === 'ITEM');

        if (!objects.length) {
          searchStatusEl.textContent = 'No items found. Try a different keyword.';
          return;
        }

        searchStatusEl.textContent = `Found ${objects.length} item(s).`;

        const frag = document.createDocumentFragment();

        objects.forEach(obj => {
          const itemData = obj.item_data || {};
          const variations = itemData.variations || [];
          const variation = variations[0]?.item_variation_data || null;
          const priceMoney = variation?.price_money || null;
          const price = priceMoney ? priceMoney.amount / 100 : null;

          const card = document.createElement('div');
          card.className = 'product-card';

          if (obj.image_url) {
            const imgEl = document.createElement('img');
            imgEl.src = obj.image_url;
            imgEl.alt = itemData.name || 'Product';
            imgEl.className = 'product-image';
            imgEl.loading = 'lazy';
            imgEl.onerror = function() {
              this.style.display = 'none';
            };
            card.appendChild(imgEl);
          }

          const nameEl = document.createElement('h3');
          nameEl.className = 'product-name';
          nameEl.textContent = itemData.name || 'Unnamed item';

          const priceEl = document.createElement('p');
          priceEl.className = 'product-price';
          priceEl.textContent = price != null ? formatMoney(price) : 'Price not available';

          const descEl = document.createElement('p');
          descEl.className = 'product-desc';
          descEl.textContent = itemData.description || '';

          const actions = document.createElement('div');
          actions.className = 'product-actions';

          const btn = document.createElement('button');
          btn.className = 'snipcart-add-item';
          btn.textContent = 'Add t
