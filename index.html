<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Growceryworld — Giving You Choices</title>
  <meta name="description" content="Growceryworld — Giving you choices. Free item and free water bottle with every order." />

  <style>
    :root{
      --bg:#ffffff; --ink:#0f172a; --muted:#475569; --border:#e5e7eb;
      --accent:#16a34a; --btn:#111827; --btnHover:#0b1220;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      font:16px/1.5 system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      background:var(--bg);
      color:var(--ink);
    }

    .wrap{max-width:1100px;margin:0 auto;padding:40px 20px}

    /* NAV */
    .top-nav{
      border-bottom:1px solid var(--border);
      padding:12px 20px;
      position:sticky;top:0;background:#fff;z-index:10
    }
    .top-nav-inner{
      max-width:1100px;margin:0 auto;
      display:flex;justify-content:space-between;align-items:center
    }
    .nav-logo{font-weight:800;font-size:18px}

    /* SEARCH */
    .search-form{display:flex;gap:8px;margin-bottom:10px}
    .search-form input{
      flex:1;padding:12px;border-radius:12px;border:1px solid var(--border)
    }
    .search-form button{
      padding:12px 16px;border-radius:12px;border:0;
      background:var(--btn);color:#fff;font-weight:700;cursor:pointer
    }

    .search-status{font-size:13px;color:var(--muted);margin-bottom:12px}

    /* INFO CARDS (HORIZONTAL) */
    .info-cards{
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:16px;
      margin:16px 0 32px;
    }

    .info-card{
      border:1px solid var(--border);
      border-radius:14px;
      padding:16px;
      display:flex;
      gap:12px;
      align-items:center;
      background:#fff;
    }

    .info-card img{
      width:56px;height:56px;object-fit:contain
    }

    .info-card h4{margin:0 0 4px;font-size:15px}
    .info-card p{margin:0;font-size:13px;color:var(--muted)}

    @media(max-width:800px){
      .info-cards{grid-template-columns:1fr}
    }

    /* RESULTS */
    .results-grid{
      display:grid;
      grid-template-columns:repeat(auto-fit,minmax(220px,1fr));
      gap:16px
    }

    .product-card{
      border:1px solid var(--border);
      border-radius:14px;
      padding:14px;
      background:#fff;
      transition:.15s;
    }
    .product-card:hover{
      box-shadow:0 10px 24px rgba(0,0,0,.08);
      transform:translateY(-2px)
    }

    .product-image{
      width:100%;height:180px;object-fit:cover;
      border-radius:10px;margin-bottom:10px;background:#f1f5f9
    }

    .product-name{font-weight:800;font-size:15px;margin:0}
    .product-price{color:var(--accent);font-weight:800;margin:4px 0}
    .product-desc{font-size:13px;color:var(--muted)}

    footer{text-align:center;color:var(--muted);font-size:13px;margin-top:40px}
  </style>
</head>

<body>
  <nav class="top-nav">
    <div class="top-nav-inner">
      <div class="nav-logo">Growceryworld</div>
    </div>
  </nav>

  <main class="wrap">
    <!-- SEARCH -->
    <section>
      <h2>Search products</h2>
      <form id="gw-search" class="search-form">
        <input id="q" type="search" placeholder="Search cereal, chips, cleaning supplies…" />
        <button type="submit">Search</button>
      </form>
      <div id="search-status" class="search-status"></div>
    </section>

    <!-- INFO CARDS -->
    <section class="info-cards">
      <div class="info-card">
        <img src="/images/free-item.png" alt="Free item">
        <div>
          <h4>Free item with every order</h4>
          <p>No gimmicks. One free item, every checkout.</p>
        </div>
      </div>

      <div class="info-card">
        <img src="/images/water-bottle.png" alt="Free water">
        <div>
          <h4>Free bottle of water</h4>
          <p>Every order includes a complimentary bottle.</p>
        </div>
      </div>

      <div class="info-card">
        <img src="/images/ups.png" alt="UPS shipping">
        <div>
          <h4>Shipped via UPS</h4>
          <p>Reliable delivery with real tracking.</p>
        </div>
      </div>
    </section>

    <!-- RESULTS -->
    <section>
      <div id="results" class="results-grid"></div>
    </section>

    <footer>
      © <span id="year"></span> Growceryworld
    </footer>
  </main>

  <script>
    // ===== CONFIG =====
    const WORKER_URL = "/api"; // routed Cloudflare Worker

    document.getElementById("year").textContent = new Date().getFullYear();

    const searchForm = document.getElementById("gw-search");
    const qInput = document.getElementById("q");
    const resultsDiv = document.getElementById("results");
    const statusEl = document.getElementById("search-status");

    searchForm.addEventListener("submit", async (e) => {
      e.preventDefault();
      const q = qInput.value.trim();
      resultsDiv.innerHTML = "";
      if (!q) return;

      statusEl.textContent = "Searching…";

      try {
        const res = await fetch(`${WORKER_URL}/search?q=${encodeURIComponent(q)}`);
        if (!res.ok) throw new Error("Search failed");

        const data = await res.json();
        const items = (data.objects || []).filter(o => o.type === "ITEM");

        if (!items.length) {
          statusEl.textContent = "No items found.";
          return;
        }

        statusEl.textContent = `Found ${items.length} item(s).`;

        items.forEach(obj => {
          const item = obj.item_data;
          const variation = item.variations?.[0]?.item_variation_data;
          const price = variation?.price_money
            ? `$${(variation.price_money.amount / 100).toFixed(2)}`
            : "Price N/A";

          const card = document.createElement("div");
          card.className = "product-card";
          card.innerHTML = `
            ${obj.image_url ? `<img class="product-image" src="${obj.image_url}" />` : ""}
            <div class="product-name">${item.name}</div>
            <div class="product-price">${price}</div>
            <div class="product-desc">${item.description || ""}</div>
          `;
          resultsDiv.appendChild(card);
        });

      } catch (err) {
        console.error(err);
        statusEl.textContent = "Search error. Check worker route.";
      }
    });
  </script>
</body>
</html>

